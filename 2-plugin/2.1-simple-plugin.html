<script src="../node_modules/vue/dist/vue.js"></script>

<script>
const RulesPlugin = {
  install(Vue) {
    Vue.mixin({
      created() {
        if (this.$options.rules) {
          Object.keys(this.$options.rules).forEach(key => {
            const rule = this.$options.rules[key];
            this.$watch(key, (newVal) => {
              const result = rule.validate(newVal);
              if (!result) {
                console.log(rule.message);
              }
            })
          })
        }
      }
    })
  }
}

Vue.use(RulesPlugin)
</script>
